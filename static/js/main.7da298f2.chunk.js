(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,n,t){e.exports=t.p+"static/media/strangerthings.533a1ea7.jpg"},129:function(e,n,t){e.exports=t.p+"static/media/stranger_things_logo.74b7f8d7.png"},214:function(e,n,t){e.exports=t(368)},219:function(e,n,t){},220:function(e,n,t){},363:function(e,n){},368:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(20),i=t.n(r),s=(t(219),t(220),t(31)),c=t(32),l=t(35),u=t(33),h=t(11),m=t(34),d=t(133),g=t.n(d),p=t(5),f=t(6);function v(){var e=Object(p.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"]);return v=function(){return e},e}var b=f.a.div(v());function y(){var e=Object(p.a)(["\n  background: ","; \n  opacity: ",";\n"]);return y=function(){return e},e}var E=Object(f.a)(b)(y(),function(e){return e.background},function(e){return e.opacity}),C=t(30),O=t.n(C),k=t(130),j=t.n(k),x=t(128),S=t.n(x),w=t(129),U=t.n(w);function T(){var e=Object(p.a)(["\n  font-size: 24px;\n  height: 27px;\n  text-align: center;\n  color: #fafafa;\n"]);return T=function(){return e},e}function I(){var e=Object(p.a)(["\n  background: url(",") no-repeat center center fixed;\n  background-size: cover;\n  height: 100%;\n  overflow: hidden;\n"]);return I=function(){return e},e}function H(){var e=Object(p.a)(["\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  a {\n    text-decoration: none;\n  }\n  img {\n    box-shadow: rgba(255, 255, 255, 0.2) 0 0 10px 2px;\n  }\n  .avatar {\n    height: 100px;\n    width: 100px;\n  }\n\n  .avatar-icon {\n    font-size: 100px;\n  }\n"]);return H=function(){return e},e}function M(){var e=Object(p.a)(["\n  content: url(",");\n  object-fit: cover;\n  width: 100%;\n"]);return M=function(){return e},e}function R(){var e=Object(p.a)(["\n  position: fixed;\n  width: 20%;\n  left: 10%;\n"]);return R=function(){return e},e}function L(){var e=Object(p.a)(["\n  position: relative;\n"]);return L=function(){return e},e}function z(){var e=Object(p.a)(["\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin: 0 20px;\n  height: 100%;\n"]);return z=function(){return e},e}function N(){var e=Object(p.a)(["\n  position: relative;\n  max-width: 1000px;\n  margin: auto;\n  padding: 40px 0;\n  height: 100%;\n  box-sizing: border-box;\n"]);return N=function(){return e},e}function A(){var e=Object(p.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  z-index: 1;\n"]);return A=function(){return e},e}var D=f.a.div(A()),B=f.a.div(N()),F=f.a.div(z()),W=f.a.div(L()),J=f.a.div(R()),P=f.a.img(M(),U.a),_=f.a.div(H()),K=f.a.div(I(),function(e){return e.src}),$=f.a.p(T());var q=function(e){return o.a.createElement(b,null,o.a.createElement(D,null,o.a.createElement(B,null,o.a.createElement(F,null,o.a.createElement(W,null,o.a.createElement(J,null,o.a.createElement(P,null),o.a.createElement(_,{onClick:e.onUserSelectionClick},function(e){var n=e?{src:e.image}:{children:o.a.createElement(j.a,{className:"avatar-icon"})};return o.a.createElement(O.a,Object.assign({className:"avatar"},n))}(e.user),o.a.createElement($,null," ",(n=e.user)?"".concat(n.name," ").concat(n.lastName):"Who are you?"," ")))),e.children))),o.a.createElement(b,null,o.a.createElement(K,{src:S.a}),o.a.createElement(E,{opacity:"0.7",background:"#0f0f0f"})));var n},G=t(23),Q=t.n(G),V=t(56),X=t.n(V),Y=t(57),Z=t.n(Y),ee=t(132),ne=t.n(ee),te=t(15);function ae(){var e=Object(p.a)(["\n    text-align: center;\n    font-size: 24px;\n"]);return ae=function(){return e},e}function oe(){var e=Object(p.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin: 0 20px;\n    z-index: 1;\n    color: #fafafa !important;\n    border-bottom: 1px solid;\n"]);return oe=function(){return e},e}function re(){var e=Object(p.a)(["\n    padding-left: 58px;\n"]);return re=function(){return e},e}function ie(){var e=Object(p.a)(["\n    border-radius: ",";\n"]);return ie=function(){return e},e}function se(){var e=Object(p.a)(["\n    /*margin-top: 0px;*/\n    color: silver !important;\n    font-size: 12px;\n"]);return se=function(){return e},e}function ce(){var e=Object(p.a)(["\n    box-sizing: border-box;\n    white-space: normal !important;\n    word-break: break-all !important;\n    overflow: initial !important;\n    width: 100%;\n    height: auto !important;\n    color: #fafafa !important;\n    /*margin-top: 5px;*/\n"]);return ce=function(){return e},e}function le(){var e=Object(p.a)(["\n    height: 100%;\n    overflow: auto;\n"]);return le=function(){return e},e}function ue(){var e=Object(p.a)(["\n    display: flex;\n    align-items: center;\n    align-self: center;\n    padding: 20px;\n    border-top: 1px solid #fafafa;\n\n    .message-input {\n        color: white;\n    }\n"]);return ue=function(){return e},e}function he(){var e=Object(p.a)(["\n    position: relative;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    z-index: 1;\n"]);return he=function(){return e},e}function me(){var e=Object(p.a)(["\n    background-color: rgb(255, 255, 255, 0.1);\n    background-image: url(",");\n    border-radius: ",";\n    background-size: cover;\n    background-position: center;\n    position: relative;\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    height: 100%;\n    width: 520px;\n    box-sizing: border-box;\n"]);return me=function(){return e},e}var de=f.a.div(me(),function(e){return e.bgImage},"20px"),ge=f.a.div(he()),pe=f.a.div(ue()),fe=f.a.div(le()),ve=f.a.div(ce()),be=Object(f.a)(ve)(se()),ye=Object(f.a)(E)(ie(),"20px"),Ee=Object(f.a)(be)(re()),Ce=f.a.div(oe()),Oe=f.a.p(ae()),ke=void 0,je=function(e){function n(e){var t;Object(s.a)(this,n),(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).onLeave=function(){clearTimeout(ke),t.setIsNotTyping(),t.props.onLeave()},t.onInputChange=function(e){t.onIsTyping(),t.setState({input:e.target.value})},t.setIsNotTyping=function(e){t.setState({isTyping:!1}),t.props.onIsTyping(e,!1)},t.panel=o.a.createRef();var a=e.chatHistory;return t.state={input:"",chatHistory:a,typingUsers:[],someoneIsTypying:!1,isTyping:!1},t.onSendMessage=t.onSendMessage.bind(Object(h.a)(t)),t.updateChatHistory=t.updateChatHistory.bind(Object(h.a)(t)),t.onMessageReceived=t.onMessageReceived.bind(Object(h.a)(t)),t.onSomeoneIsTypingReceived=t.onSomeoneIsTypingReceived.bind(Object(h.a)(t)),t.onIsTyping=t.onIsTyping.bind(Object(h.a)(t)),t}return Object(m.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.registerHandler(this.onMessageReceived,this.onSomeoneIsTypingReceived),this.scrollToChatBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToChatBottom()}},{key:"componentWillUnmount",value:function(){this.props.unregisterHandler()}},{key:"onIsTyping",value:function(){var e=this,n=this.props.onIsTyping,t=this.props.chatroom.name;this.state.isTyping?(console.log("type bounce"),clearTimeout(ke),ke=setTimeout(function(){return e.setIsNotTyping(t)},1e3)):(this.setState({isTyping:!0}),ke=setTimeout(function(){return e.setIsNotTyping(t)},1e3),n(t,!0))}},{key:"onSendMessage",value:function(){var e=this;if(console.log("message to send is:",this.state.input),this.state.input){this.props.onSendMessage(this.state.input,function(n){return n?console.error(n):e.setState({input:""})})}}},{key:"onMessageReceived",value:function(e){console.log("onMessagedReceived: ",e),this.updateChatHistory(e)}},{key:"onSomeoneIsTypingReceived",value:function(e){console.log("theese many typing: ",e.length),this.setState({typingUsers:e})}},{key:"updateChatHistory",value:function(e){this.setState({chatHistory:this.state.chatHistory.concat(e)})}},{key:"scrollToChatBottom",value:function(){this.panel.current.scrollTo(0,this.panel.current.scrollHeight)}},{key:"showMessageEvent",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(te.j,null,o.a.createElement(O.a,{alt:"Username image",src:e.user.image})),o.a.createElement(te.k,{disableTypography:!0,primary:o.a.createElement(be,null,e.user.name," ",e.event),secondary:o.a.createElement(ve,null,e.message)}))}},{key:"showChatroomEvent",value:function(e){return o.a.createElement(te.k,{disableTypography:!0,secondary:o.a.createElement(Ee,null,e.user.name," ",e.event)})}},{key:"showEvent",value:function(e){return e.event?this.showChatroomEvent(e):this.showMessageEvent(e)}},{key:"showIsTyping",value:function(){var e=this.state.typingUsers.slice();if(e.length>0){var n=e.length<4?this.state.typingUsers.map(function(e){return e.name}).join(", "):"more than three";return o.a.createElement(te.l,{color:"secondary",align:"center",variant:"overline"},n," is typing...")}}},{key:"showAllMessages",value:function(e){var n=this;return o.a.createElement(te.h,null,e.map(function(e){return o.a.createElement(te.i,{alignItems:"flex-start",key:e.id},n.showEvent(e))}))}},{key:"render",value:function(){var e=this;return o.a.createElement(de,{bgImage:this.props.chatroom.image},o.a.createElement(Ce,null,o.a.createElement(Oe,null,this.props.chatroom.name),o.a.createElement(Q.a,{variant:"contained",color:"secondary",onClick:this.onLeave},"Close")),o.a.createElement(ge,null,o.a.createElement(fe,{ref:this.panel},this.showAllMessages(this.state.chatHistory)),this.showIsTyping(),o.a.createElement(pe,null,o.a.createElement(X.a,{className:"message-input",color:"secondary",id:"message-input",placeholder:"Enter a message...",onChange:this.onInputChange,value:this.state.input,onKeyPress:function(n){return"Enter"===n.key?e.onSendMessage():null},autoComplete:"off",inputProps:{"aria-label":"Description"}}),o.a.createElement(Z.a,{component:"button",variant:"extended","aria-label":"Delete",onClick:this.onSendMessage},o.a.createElement(ne.a,null),"Send"))),o.a.createElement(ye,{opacity:"0.5",background:"black"}))}}]),n}(o.a.Component),xe=t(58),Se=t.n(xe),we=t(29),Ue=t.n(we);function Te(){var e=Object(p.a)(["\n    float: right;\n    background-color: #123EDF;\n    width: 70%;\n    min-width: 250px;\n    margin-bottom: 20px;\n"]);return Te=function(){return e},e}var Ie=f.a.section(Te());var He=function(e){var n=e.chatroom,t=e.onEnter;return o.a.createElement(Ie,{padding:!0},o.a.createElement(Se.a,{onClick:function(e){return t(n,e)}},o.a.createElement(te.b,null,o.a.createElement(te.d,{component:"img",image:n.image}),o.a.createElement(te.c,null,o.a.createElement(Ue.a,{gutterBottom:!0,variant:"h5",component:"h2"},n.name)))))},Me=function(e){var n=e.chatrooms,t=e.onEnterChatroom;return o.a.createElement("div",null,n.map(function(e){return o.a.createElement(He,{key:e.name,chatroom:e,onEnter:t})}))},Re=t(59),Le=t.n(Re);function ze(){var e=Object(p.a)(["\n    margin: auto;\n"]);return ze=function(){return e},e}var Ne=f.a.div(ze());function Ae(e){return o.a.createElement(Ne,null,o.a.createElement(Le.a,{color:"secondary"}))}var De=t(52),Be=t.n(De),Fe=t(53),We=t.n(Fe),Je=t(54),Pe=t.n(Je),_e=t(55),Ke=t.n(_e),$e=t(60),qe=t.n($e),Ge=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).isUserSelected=function(e){return!(!e||!t.props.selectedUser)&&e.name===t.props.selectedUser.name},t.state={availableUsers:null},t.renderUserListItems=t.renderUserListItems.bind(Object(h.a)(t)),t.handleClose=t.handleClose.bind(Object(h.a)(t)),t.handleUserSelection=t.handleUserSelection.bind(Object(h.a)(t)),t.isUserSelected=t.isUserSelected.bind(Object(h.a)(t)),t}return Object(m.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getAvailableUsers(function(n,t){console.log("client got the availableUsers: ",t),e.setState({availableUsers:t})})}},{key:"handleClose",value:function(){this.props.onClose()}},{key:"handleUserSelection",value:function(e){this.props.onSelection(e)}},{key:"renderUserListItems",value:function(){var e=this;return this.state.availableUsers.map(function(n){return o.a.createElement(We.a,{button:!0,selected:e.isUserSelected(n),onClick:function(){return e.handleUserSelection(n)},key:n.name},o.a.createElement(Pe.a,null,o.a.createElement(te.a,{src:n.image})),o.a.createElement(Ke.a,{primary:n.name+" "+n.lastName}))})}},{key:"render",value:function(){return o.a.createElement(te.e,{onClose:this.handleClose,open:this.props.open},o.a.createElement(te.g,null,"Choose User"),o.a.createElement(te.f,null,this.state.availableUsers?o.a.createElement(Be.a,null,this.renderUserListItems()):o.a.createElement(Ae,null)),o.a.createElement(qe.a,{onClick:this.handleClose},o.a.createElement(Q.a,null,"Close")))}}]),n}(o.a.Component),Qe=t(339),Ve=function(){var e="https://socket-chat-app-server-jfrisks.herokuapp.com/",n=Qe.connect(e);return console.log(e),n.on("error",function(e){console.log("received socket error:",e)}),{register:function(e,t){n.emit("register",e,t)},join:function(e,t){n.emit("join",e,t)},leave:function(e,t){n.emit("leave",e,t)},message:function(e,t,a){n.emit("message",{chatroomName:e,message:t},a)},isTyping:function(e,t,a){console.log("sending is typing to server: ".concat(t," from ").concat(e)),n.emit("isTyping",{chatroomName:e,isTyping:t},a)},getChatRooms:function(e){console.log("getting chatrooms"),n.emit("chatrooms",null,e)},getAvailableUsers:function(e){n.emit("availableUsers",null,e)},registerHandler:function(e,t){console.log("adding chatroomslisteners from server"),n.on("message",e),n.on("someoneIsTyping",t)},unregisterHandler:function(){n.off("message"),n.off("someoneIsTyping")}}},Xe=function(e){function n(e,t){var a;return Object(s.a)(this,n),(a=Object(l.a)(this,Object(u.a)(n).call(this,e))).handleOnEnterChatroom=function(e){a.onEnterChatroom(e.name,function(){console.log("no user is selected",a.state.user),a.setState({selectedChatroom:null})},function(n){console.log("Entered Correctly and will show chatHistory: ",n),a.setState({chatHistory:n,selectedChatroom:e})})},a.state={client:Ve(),user:null,chatrooms:null,selectedChatroom:null,userSelectionOpen:!1},a.registerUser=a.registerUser.bind(Object(h.a)(a)),a.handleOnLeaveChatroom=a.handleOnLeaveChatroom.bind(Object(h.a)(a)),a.handleSendMessage=a.handleSendMessage.bind(Object(h.a)(a)),a.handleUserSelectionClickOpen=a.handleUserSelectionClickOpen.bind(Object(h.a)(a)),a.handleClose=a.handleClose.bind(Object(h.a)(a)),a.handleRegister=a.handleRegister.bind(Object(h.a)(a)),a.onEnterChatroom=a.onEnterChatroom.bind(Object(h.a)(a)),a.onLeaveChatroom=a.onLeaveChatroom.bind(Object(h.a)(a)),a.getChatrooms=a.getChatrooms.bind(Object(h.a)(a)),a.handleIsTyping=a.handleIsTyping.bind(Object(h.a)(a)),a}return Object(m.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log("comp did mount"),this.getChatrooms()}},{key:"getChatrooms",value:function(){var e=this;this.state.client.getChatRooms(function(n,t){console.log("got chatrooms from server: ",t),e.setState({chatrooms:t})})}},{key:"handleUserSelectionClickOpen",value:function(){var e=this;this.state.selectedChatroom||this.setState({userSelectionOpen:!0},function(){return console.log("handledClick. UserSel is open: ",e.state.userSelectionOpen)})}},{key:"handleClose",value:function(){this.setState({userSelectionOpen:!1})}},{key:"onEnterChatroom",value:function(e,n,t){if(!this.state.user)return n();return this.state.client.join(e,function(e,n){return e?Error(e):t(n)})}},{key:"handleOnLeaveChatroom",value:function(){var e=this;this.onLeaveChatroom(this.state.selectedChatroom,function(){var n=e.state.selectedChatroom;e.setState({selectedChatroom:null}),console.log("Left chatroom: ",n)})}},{key:"onLeaveChatroom",value:function(e,n){this.state.client.leave(e.name,function(e){return e?Error("Could not leave chatroom",e):n()})}},{key:"handleRegister",value:function(e){console.log("Client is handling user Register"),this.registerUser(e)}},{key:"registerUser",value:function(e){var n=this,t=function(e){return n.setState({userSelectionOpen:!1,user:e})};console.log("calling client to server to handle Register"),this.setState({userSelectionOpen:!0}),this.state.client.register(e.name,function(e,n){return e?(console.error("got error from server when registering: ",e),t(null)):t(n)})}},{key:"handleSendMessage",value:function(e,n){console.log("locally handling message ".concat(e," in chatroom ").concat(this.state.selectedChatroom.name)),this.state.client.message(this.state.selectedChatroom.name,e,n)}},{key:"handleIsTyping",value:function(e,n){this.state.client.isTyping(this.state.selectedChatroom.name,n,function(e){e&&console.error("got this error from server when sending user is typing: ",e)})}},{key:"isUserAndChatroomSelected",value:function(){return!(!this.state.selectedChatroom||!this.state.user)}},{key:"showChatroom",value:function(){return o.a.createElement(je,{chatroom:this.state.selectedChatroom,user:this.state.user,chatHistory:this.state.chatHistory,registerHandler:this.state.client.registerHandler,unregisterHandler:this.state.client.unregisterHandler,onSendMessage:this.handleSendMessage,onIsTyping:this.handleIsTyping,onLeave:this.handleOnLeaveChatroom})}},{key:"showHome",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.chatrooms?o.a.createElement(Me,{chatrooms:this.state.chatrooms,onEnterChatroom:this.handleOnEnterChatroom}):o.a.createElement(Ae,null))}},{key:"showUserSelection",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.userSelectionOpen?o.a.createElement(Ge,{onClose:this.handleClose,onSelection:this.handleRegister,open:!0,selectedUser:this.state.user,getAvailableUsers:this.state.client.getAvailableUsers}):o.a.createElement(o.a.Fragment,null))}},{key:"render",value:function(){return o.a.createElement(g.a,null,o.a.createElement(q,{user:this.state.user,onUserSelectionClick:this.handleUserSelectionClickOpen},this.isUserAndChatroomSelected()?this.showChatroom():this.showHome(),this.showUserSelection()))}}]),n}(o.a.Component);var Ye=function(){return o.a.createElement(Xe,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[214,1,2]]]);
//# sourceMappingURL=main.7da298f2.chunk.js.map